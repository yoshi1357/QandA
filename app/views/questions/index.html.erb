<% provide :title, set_title("TOP")  %>

<div id="index"  class="container">
  <!--パンくずリスト-->
  <ol class="breadcrumb">
   <li class="breadcrumb-item active">HOME</li>
  </ol>

  <div class="row">
    <main class="col-md-8">
      <div class="p-4">
        <h2 class="text-center py-4">投稿された質問</h2>
        <div class="row">
          <% @questions.each do |question| %>
            <article class="col-md-6">
              <dl>
                <hr>
                <dt><%= link_to question.title.truncate(20) ,question_path(question) %></dt>
                <dd class="qcontent text-left"><%= question.content %></dd>
                <dd>投稿日時: <%= simple_time(question.created_at) %></dd>
                <dd>[ <%= link_to '編集', edit_question_path(question) %> ] [ <%= link_to '消去', question_path(question), method: :delete, data: {confirm: 'Are you sure?'} %> ]</dd>
                <hr>
              </dl>
            </article>
          <% end %>
        </div>
      </div>

      <%= link_to '新規質問投稿画面へ', new_question_path  %>
      <!--#ページネーションを表示したいところへ-->
      <block class="paginate"><%= paginate @questions %></block>
    </main>

    <aside class="col-md-4">
      <article>
        <h4>回答の数が多い質問TOP5</h4>
        <% 5.times do |n| %>
          <hr>
          <dl>
            <dt><span><%= n+1 %></span><%= link_to @nores_questions[n].title.truncate(20), question_path(@nores_questions[n]) %></dt>
            <dd><%= "回答数: #{@nores[n]}" %></dd>
          </dl>
          <hr>
        <% end %>
      </article>
      <article>
        <h4>最近に投稿された質問TOP5</h4>
        <% @latest_questions.each_with_index do |latest_question, i| %>
          <hr>
          <dl>
            <dt><span><%= i+1 %></span><%= link_to latest_question.title.truncate(20), question_path(latest_question) %></dt>
            <dd><%= "投稿日時: #{simple_time(latest_question.created_at)}" %></dd>
          </dl>
          <hr>
        <% end %>
      </article>
    </aside>

  </div>

</div>

